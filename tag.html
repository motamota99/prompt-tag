<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>プロンプトタグ｜ライト / リアル（重厚プリセット）</title>
<meta name="theme-color" content="#ffffff">
<style>
  :root{
    /* Light */
    --bg:#f7f8fc; --card:#ffffff; --ink:#1f2937; --muted:#6b7280;
    --brand:#6366f1; --brand2:#a78bfa; --ok:#10b981; --stroke:#e5e7eb;
    --chip:#eef2ff; --chip-ink:#3730a3; --divider:#dfe3ef;
    --accent-grad:linear-gradient(90deg,var(--brand),var(--brand2));
    --dock-shadow:0 10px 30px rgba(31,41,55,.08);
  }
  /* Real (Dark) : body.pro */
  body.pro{
    --bg:#0f1115; --card:#151821; --ink:#e5e7eb; --muted:#97a3b6;
    --stroke:#242a3a; --divider:#2a3042;
    --chip:#1b2130; --chip-ink:#cbd5e1;
    --accent-grad:linear-gradient(90deg,#0ea5e9,#22d3ee);
    --dock-shadow:0 10px 30px rgba(0,0,0,.45);
  }
  *{box-sizing:border-box; -webkit-tap-highlight-color:transparent}
  html,body{margin:0;background:var(--bg);color:var(--ink);
    font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans JP",sans-serif}
  .wrap{max-width:760px;margin:0 auto;padding:18px 14px 140px}
  .card{background:var(--card);border:1px solid var(--stroke);border-radius:16px;box-shadow:0 6px 24px rgba(0,0,0,.05)}
  header{display:flex;align-items:center;gap:12px;padding:14px 16px 8px}
  .logo{width:40px;height:40px;border-radius:12px;background:
    radial-gradient(120% 120% at 10% 10%,#eef2ff 0,#e0e7ff 35%,#c7d2fe 60%,#a5b4fc 100%);
    display:grid;place-items:center;color:#4338ca;font-weight:700}
  body.pro .logo{background:radial-gradient(120% 120% at 10% 10%,#1a2440 0,#13243c 50%,#0e2238 100%); color:#67e8f9}
  h1{font-size:18px;line-height:1.2;margin:0}
  .seg{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin:8px 16px}
  .seg button{appearance:none;border:1px solid var(--stroke);background:var(--card);
    padding:12px;border-radius:12px;font-weight:700;color:var(--ink)}
  .seg button.active{border-color:transparent;background:var(--accent-grad);color:#fff}
  .banner{margin:0 16px 10px;border-radius:12px;padding:10px 12px;font-size:12px}
  body:not(.pro) .banner{background:#eef2ff;color:#3730a3}
  body.pro .banner{background:#0b1220;color:#93c5fd;border:1px solid #0f172a}
  .section{padding:12px 16px}
  .title{font-size:13px;font-weight:800;letter-spacing:.02em;margin:0 0 8px}
  .box{border:1px solid var(--stroke);border-radius:12px;background:var(--card)}
  .textarea{width:100%;min-height:120px;max-height:420px;padding:12px;border:0;
    border-radius:12px;font-size:15px;line-height:1.6;background:transparent;color:var(--ink);resize:vertical}
  .hint{display:flex;gap:8px;align-items:center;font-size:12px;color:var(--muted);padding:8px 12px;border-top:1px dashed var(--divider)}
  .divider{height:12px;background:linear-gradient(180deg,transparent,rgba(0,0,0,0.02));border-top:1px solid var(--divider);border-bottom:1px solid var(--divider);margin:8px 0}
  .chips{display:flex;gap:10px;row-gap:10px;flex-wrap:wrap}
  .chips.scroll{flex-wrap:nowrap;overflow:auto;padding:2px 2px 8px;scroll-snap-type:x mandatory}
  .chips.scroll .chip{scroll-snap-align:start}
  .chip{appearance:none;border:0;background:var(--chip);color:var(--chip-ink);
    padding:12px 14px;border-radius:18px;font-size:14px;white-space:nowrap}
  .chip.big{font-size:15px;padding:14px 16px}
  .chip.outline{background:transparent;border:1px solid var(--stroke);color:var(--ink)}
  .chip:active{transform:translateY(1px)}
  details{border:1px solid var(--stroke);border-radius:12px;background:var(--card)}
  details+details{margin-top:10px}
  summary{list-style:none;padding:12px 14px;font-weight:700;cursor:pointer}
  summary::-webkit-details-marker{display:none}
  .panel{padding:12px;border-top:1px solid var(--stroke)}
  /* Dock */
  .dock{position:fixed;left:0;right:0;bottom:0;padding:14px 12px;background:linear-gradient(180deg,rgba(0,0,0,0),var(--bg) 14px)}
  .dock .card{box-shadow:var(--dock-shadow);border-radius:16px;padding:10px 10px 12px}
  .dock-title{font-size:12px;color:var(--muted);padding:0 6px 6px;border-bottom:1px solid var(--divider);margin-bottom:10px}
  .row{display:flex;gap:8px}
  .btn{flex:1;appearance:none;border:0;border-radius:12px;padding:12px 14px;font-weight:800;font-size:15px;color:#fff;background:#111}
  .btn.brand{background:var(--accent-grad)}
  .btn.ghost{background:transparent;color:var(--ink);border:1px solid var(--stroke)}
  .btn:active{transform:translateY(1px)}
  .more{margin-top:8px}
  .more details{border:1px dashed var(--divider);background:transparent}
  .more summary{font-weight:600;color:var(--muted)}
  .toast{position:fixed;left:50%;bottom:90px;transform:translateX(-50%);background:#111;color:#fff;padding:10px 12px;border-radius:10px;
    font-size:13px;opacity:0;pointer-events:none;transition:opacity .25s;z-index:50}
  .toast.show{opacity:1}
  .hidden{display:none}
</style>
</head>
<body class="lite">
<div class="wrap">
  <div class="card">
    <header>
      <div class="logo">PT</div>
      <div><h1>プロンプトタグ</h1></div>
    </header>

    <!-- タブ -->
    <div class="seg" role="tablist" aria-label="モード切替">
      <button id="tab-lite" class="active" role="tab" aria-selected="true">ライト</button>
      <button id="tab-pro" role="tab" aria-selected="false">リアル</button>
    </div>

    <!-- バナー -->
    <p id="banner" class="banner">ライト：明るくシンプル。ボタン→少し直す→送る。</p>

    <!-- 入力 -->
    <div class="section">
      <p class="title">テキスト</p>
      <div class="box">
        <textarea id="prompt" class="textarea" inputmode="text" enterkeyhint="done" placeholder="ここに送る文章（プロンプト）"></textarea>
        <div class="hint">🔒 端末内のみ保存。長文はURLに埋め込まないのが安定（共有 or コピーがおすすめ）。</div>
      </div>
    </div>

    <!-- ライト -->
    <section id="mode-lite" class="section" role="tabpanel">
      <p class="title">クイック（遊び感覚）</p>
      <div class="box" style="padding:12px">
        <div class="chips">
          <button class="chip big" data-key="lite_genki">🎙️ 元気な実況</button>
          <button class="chip big" data-key="lite_shop">🛒 やさしい店員</button>
          <button class="chip big" data-key="lite_uranai">🔮 占い師風</button>
          <button class="chip big" data-key="lite_teacher">🏫 先生風</button>
          <button class="chip big" data-key="lite_nagoya">🍤 名古屋弁12歳</button>
          <button class="chip big" data-key="lite_bbs">🧵 掲示板っぽく</button>
        </div>
      </div>
    </section>

    <div class="divider" aria-hidden="true"></div>

    <!-- リアル（重厚プリセット） -->
    <section id="mode-pro" class="section hidden" role="tabpanel" aria-hidden="true">
      <p class="title">重厚プリセット（世界観ガチ作り）</p>
      <div class="box" style="padding:12px">
        <div class="chips scroll">
          <button class="chip" data-key="pro_90s_bbs">90s × 掲示板（濃）</button>
          <button class="chip" data-key="pro_80s_blog">80s × ブログ記事＋コメント（濃）</button>
          <button class="chip" data-key="pro_00s_social">00s × SNSタイムラインAMA（濃）</button>
          <button class="chip" data-key="pro_edo_diary">江戸 × 町日記＋問答（濃）</button>
          <button class="chip" data-key="pro_trpg_tokyo">TRPG × 現代東京サンドボックス</button>
          <button class="chip" data-key="pro_img_friendly">画像生成フレンドリー（無料配慮）</button>
        </div>
      </div>

      <details class="section" open>
        <summary>職業（プロフェッショナル強化）</summary>
        <div class="panel">
          <div class="chips">
            <button class="chip outline" data-key="job_lawyer">⚖️ 弁護士（濃）</button>
            <button class="chip outline" data-key="job_nurse">🩺 看護師（濃）</button>
            <button class="chip outline" data-key="job_site_mgr">🏗️ 建築現場監督（濃）</button>
            <button class="chip outline" data-key="job_conveni">🏪 コンビニ店長（濃）</button>
          </div>
        </div>
      </details>
    </section>
  </div>
</div>

<!-- Dock -->
<div class="dock" aria-label="アクション">
  <div class="card">
    <div class="dock-title">アクション</div>
    <div class="row" style="margin-bottom:8px">
      <button class="btn brand" id="shareApp">アプリに共有</button>
      <button class="btn ghost" id="openWeb">Webで開く（コピー）</button>
      <button class="btn" style="background:var(--ok)" id="copyBtn">コピー</button>
    </div>
    <div class="more">
      <details>
        <summary>その他（NFC/リセット）</summary>
        <div class="panel">
          <div class="row">
            <button class="btn ghost" id="saveURL">URLを作る</button>
            <button class="btn ghost" id="clearBtn">クリア</button>
          </div>
          <p class="hint" style="margin-top:8px">URLの # 以降にテキストを埋め込みます。長文は共有/コピーのほうが安全です。</p>
        </div>
      </details>
    </div>
  </div>
</div>

<div id="toast" class="toast" role="status" aria-live="polite">copied</div>

<!-- ★ プリセットJSON（長文はここに定義） -->
<script id="presetsJSON" type="application/json">
{
  "lite_genki":"あなたは元気な実況アナ。文末は短く歯切れよく。絵が浮かぶ言葉で、1〜2文で要点を実況する。",
  "lite_shop":"あなたはやさしい店員。丁寧だが長くしない。困っている人に“次の一手”を具体的に案内。",
  "lite_uranai":"あなたは占い師風。断言はせず“方向性”を短く示す。ラッキー“物・色・音”を1つずつ。",
  "lite_teacher":"あなたは学校の先生。例は身近なものを1つ。難しい言葉を使わず、2文以内で説明。",
  "lite_nagoya":"あなたは名古屋弁の12歳。語尾は軽く“〜だがね”。冗談は一粒まで。",
  "lite_bbs":"掲示板スレっぽく短いやり取り。1レスは1〜2文。はじめに『今、答えられる。順にどうぞ。』を書き出す。",

  "pro_90s_bbs":"【役割】90年代日本の匿名掲示板（草創期）の住人として、生活現場を“音・道具・金額・時間スケール”で語る。\\n【板の空気】sage推奨/半角ｶﾅは控えめ/内輪ネタ少なめ/AAは行頭1回まで。句読点はやや少なめ。\\n【書式】\\n1: スレ主：『街の“音”と“道具”で当時を語れ。嘘は短く露呈する。』\\n以降、短レス往復。名無しの質問→住人の返答。各投稿は1〜2文＋根拠一言。\\n【表現ルール】\\n- 具体は“誰でも辿れる指標”で：価格目安（CDシングル1000円弱/おにぎり100円台/タクシー初乗り600〜700円台）、所要時間、普及率のニュアンス。\\n- 生活ディテールを最低3点：①音（ダイヤルアップ接続音/ポケベルの数字入力/駅改札の打刻）②道具（テレカ/プリクラ/ワープロ/フロッピー）③匂い・質感（喫煙可オフィスの紙の匂い/雨のアーケードの湿気）。\\n- 固有名・日付は濫用しない。曖昧な所は『目安』『〜頃』。比喩は最小。\\n- 語尾は断定か短い限定（『〜だ』『目安〜』）。長講釈禁止。\\n【トピック例】物価/電気代/住まい/就職/家電/通学/ゲーム/テレビ/交通/決済/災害備え。\\n【開始】\\n1：スレ立て乙。街の音と道具と金額でやれ。\\n【出力例の並び】\\n名無しさん：給料と家賃、今と比べどう？\\n住人　　：相場だけ言う。ワンルームは駅次第。紙の募集で探す。>>2 家賃は面積と路線、初期費用が重い。\\n（以降、短やり取りを10往復程度。各レスに“音/道具/金額”を1つは混ぜる。）",

  "pro_80s_blog":"【役割】1980年代日本の“短い記事＋コメント欄Q&A”。昭和末の街の空気を具体で描く。\\n【記事骨格】\\n1. 見出し：80s街の今日メモ（要点だけ）\\n2. リード：長くは書かない。音/道具/金額で生活を置く。\\n3. セクション×4〜6（各2文）：\\n   - 家電と居間：ブラウン管の静電気、ビデオの唸り。\\n   - 切符と移動：硬券/改札鋏の音。国鉄→JRの揺れ。\\n   - 商店街：蛍光灯の白、たばこの匂い、シャッターの音。\\n   - 価格感：缶120円前後、ガソリン100円台半ば、定食600円台。\\n   - 情報の入手：新聞/雑誌/貼り紙。電話と手書きメモ。\\n4. 区切り文：ここからコメントに短く返す。\\n【Q&Aルール】一問一答/1〜2文/必要なら順番（例：窓→すき間→除湿）。固有名は控えめ、日付は目安。\\n【文体】常体。比喩は控えめ。根拠ひと言を添える（価格/普及/制度）。",

  "pro_00s_social":"【役割】2000年代前半のSNSタイムライン（ブログ/初期SNS/ミニブログ）でAMA。\\n【固定ポスト】常時表示：『現場の温度で答える。音・道具・金額の3点で質問を。』\\n【時代小物】ADSL常時接続/折りたたみ携帯の着うた/ネット喫茶/IC乗車券普及初期/牛丼280–380円。\\n【回答方針】1投稿=1〜2文＋根拠一言。断言と限定を使い分け。不確実は『目安』明記。\\n【スレッド運用】質問→短返信/必要なら1〜2件だけ追補。比喩は最小。固有名・日付は避ける。",

  "pro_edo_diary":"【役割】江戸町人の“町日記＋問答”。不定時法、町の音、銭の感覚で描く。\\n【記事】\\n- 見出し：町日記（本日）\\n- 導入：長くは綴らぬ。音・道具・銭で置く。\\n- 小見出し×4（各2文）：\\n  ・朝の鐘：明六ツ。井戸端の声、行商の呼び声。\\n  ・銭勘定：蕎麦は一杯十数文の目安。紙子の値は季。\\n  ・移動：徒歩/舟運、橋の賑わい。\\n  ・暮らし：長屋の共同便所、油皿の匂い。\\n- 書き止め：これより問答いたそう。\\n【言い回し】候文までは不要。『〜でござんす』『〜にてぇ』を軽く。\\n【問答】一問一答/1〜2文/不確実は『ここは控える』。",

  "pro_trpg_tokyo":"【目的】仮想“現代東京”を継続的に積み上げるTRPG/シム運用。\\n【役割】あなたはゲームマスター兼シミュレーションエンジン。ユーザーはプレイヤー。\\n【ループ】\\n1) 状況ログ要約（3行）：場所/時間帯/人の流れ/天候・音・匂い。\\n2) 世界状態の更新：NPC/店舗/交通/価格/イベントのキュー。\\n3) 選択肢3〜5個：実用と遊びを混ぜる（例：駅前調査/河川敷/商店街ヒアリング/行政窓口）。\\n4) プレイヤーの自由入力を受理→裁定→結果ログ（音・道具・金額を必ず1つ入れる）。\\n【制約】固有名や個人情報は避ける。数字は目安（価格帯/混雑度/所要時間）。\\n【初期化】日時/駅名風の架空地名/天気/イベント1つから開始。",

  "pro_img_friendly":"【画像生成フレンドリー・無料配慮】\\n- まず“テキストのみ”でディテールを固める：構図/被写体/衣装/小物/光源/レンズ/時代の痕跡（看板・料金表）/配色。\\n- 有料画像生成が使える場合のみ、最後に“1枚分の英語プロンプト”を添える（日本語も併記）。\\n- 無料勢には『画像の代替として、30〜60語の視覚描写パラグラフ』を出す。\\n- どちらも“音・道具・金額・文字（看板/貼り紙）”のうち3要素以上を必ず入れる。",

  "job_lawyer":"【弁護士（濃）】\\n- 現場音：コピー連打/ホチキスの金属音/製本テープのきしみ/期日呼出のアナウンス。\\n- 道具：ICレコーダー/時系列要約表/証拠ラベル/赤黒ペン/糊付き付箋。\\n- 手順：受任→委任状/着手金→証拠収集→交渉/訴訟→和解/判決→清算。\\n- 実務コツ：主張は“事実→評価→結論”の順。数字は目安で限定。\\n- 返答スタイル：掲示板体裁/1〜2文＋根拠。長講釈禁止。",
  "job_nurse":"【看護師（濃）】\\n- 音と匂い：ナースコール/モニタのビープ/手指消毒のアルコール臭。\\n- 手順：バイタル→投薬ダブルチェック→記録。夜勤は巡視/急変対応。\\n- ディテール：巡回ワゴン/点滴の滴数/家族説明の時間確保。\\n- 返答：SNS体裁/1〜2文＋根拠。冗長禁止。",
  "job_site_mgr":"【建築現場監督（濃）】\\n- 音：朝礼の拡声器/打設の振動/バックホウの警告音。\\n- 道具：墨出し/レーザー/出来形写真/安全書類。\\n- 段取り：近隣→安全→工程→品質→原価。\\n- 返答：短文＋順番提示（崩さない）。",
  "job_conveni":"【コンビニ店長（濃）】\\n- 音と匂い：フライヤーの油音/深夜納品台車/POSのピッ。\\n- ルーチン：検品→前出し→日配廃棄→締め。\\n- 実務：マルチ端末/公共料金/宅配受付。\\n- 返答：短文＋価格感は地域差を明記。"
}
</script>

<div id="toast" class="toast" role="status" aria-live="polite">copied</div>

<script>
  // ---------- 基本UI ----------
  const body = document.body;
  const promptBox = document.getElementById('prompt');
  const tabLite  = document.getElementById('tab-lite');
  const tabPro   = document.getElementById('tab-pro');
  const modeLite = document.getElementById('mode-lite');
  const modePro  = document.getElementById('mode-pro');
  const banner   = document.getElementById('banner');
  const toast    = document.getElementById('toast');

  function setMode(mode){
    const isLite = (mode==='lite');
    body.classList.toggle('pro', !isLite);
    tabLite.classList.toggle('active', isLite);
    tabPro.classList.toggle('active', !isLite);
    tabLite.setAttribute('aria-selected', isLite?'true':'false');
    tabPro.setAttribute('aria-selected', !isLite?'true':'false');
    modeLite.classList.toggle('hidden', !isLite);
    modePro.classList.toggle('hidden', isLite);
    modePro.setAttribute('aria-hidden', isLite?'true':'false');
    banner.textContent = isLite
      ? 'ライト：明るくシンプル。ボタン→少し直す→送る。'
      : 'リアル：黒基調。長文プリセットで“音・道具・金額”の3点を入れて世界観を固める。';
    localStorage.setItem('pt_mode', mode);
  }
  tabLite.addEventListener('click', ()=>setMode('lite'));
  tabPro.addEventListener('click', ()=>setMode('pro'));
  setMode(localStorage.getItem('pt_mode') || 'lite');

  function showToast(msg){ toast.textContent = msg; toast.classList.add('show'); setTimeout(()=>toast.classList.remove('show'),1400); }

  // ---------- プリセット読込（JSON） ----------
  const PRESETS = JSON.parse(document.getElementById('presetsJSON').textContent);

  // すべての .chip に data-key があれば JSON から注入
  document.querySelectorAll('.chip').forEach(btn=>{
    btn.addEventListener('click',()=>{
      const key = btn.dataset.key;
      const text = key ? PRESETS[key] : (btn.dataset.preset||btn.textContent);
      insertPreset(text);
    });
  });

  // キーボードを出さない挙動
  function insertPreset(text){
    const start = document.activeElement;
    promptBox.value = (text||'').trim();
    if (start && typeof start.blur==='function' && start!==promptBox) start.blur();
    showToast('プリセットを挿入しました');
  }

  // ---------- 共有/コピー系 ----------
  async function shareToApp(text){
    if (navigator.share){
      try{ await navigator.share({ text }); return true; }catch(e){}
    }
    return false;
  }
  async function doCopy(text){
    try{
      const ta=document.createElement('textarea');
      ta.value=text; ta.setAttribute('readonly','');
      ta.style.position='fixed'; ta.style.opacity='0'; ta.style.top='-2000px';
      document.body.appendChild(ta); ta.focus(); ta.select(); ta.setSelectionRange(0,text.length);
      const ok=document.execCommand && document.execCommand('copy');
      document.body.removeChild(ta); if(ok) return true;
    }catch(e){}
    try{ await navigator.clipboard.writeText(text); return true; }catch(e){ return false; }
  }

  document.getElementById('shareApp').addEventListener('click', async ()=>{
    const txt = promptBox.value.trim();
    if(!txt){ showToast('テキストが空です'); return; }
    const shared = await shareToApp(txt);
    if (shared){ showToast('共有シートを開きました。ChatGPTを選んでください'); return; }
    const ok = await doCopy(txt);
    window.open('https://chat.openai.com/','_blank','noopener');
    showToast(ok ? 'コピー済み。ChatGPTで貼り付けてください' : 'コピー不可。手動でペーストしてください');
  });
  document.getElementById('openWeb').addEventListener('click', async ()=>{
    const txt = promptBox.value.trim();
    if(!txt){ showToast('テキストが空です'); return; }
    const ok = await doCopy(txt);
    window.open('https://chat.openai.com/','_blank','noopener');
    showToast(ok ? 'コピー済み。ChatGPTで貼り付けてください' : 'コピー不可。手動でペーストしてください');
  });
  document.getElementById('copyBtn').addEventListener('click', async ()=>{
    const ok = await doCopy(promptBox.value);
    showToast(ok?'コピーしました':'コピーに失敗。長押し→ペーストしてください');
  });

  function encHash(s){ return encodeURIComponent(s).replace(/%20/g,'+'); }
  function decHash(h){ try{ return decodeURIComponent(h.replace(/\+/g,'%20')); }catch(e){ return h; } }

  document.getElementById('saveURL').addEventListener('click', async ()=>{
    const txt = promptBox.value.trim();
    if(!txt){ showToast('テキストが空です'); return; }
    // 長文はURLに不向きなので注意表記だけ残す
    if (txt.length > 1500) { showToast('長文です。URL埋め込みは非推奨（共有/コピー推奨）'); return; }
    const url = location.origin + location.pathname + '#' + encHash(txt);
    history.replaceState(null,'', url);
    const ok = await doCopy(url);
    showToast(ok ? 'URLをコピーしました' : 'URLコピー不可。手動で選択してください');
  });

  document.getElementById('clearBtn').addEventListener('click', ()=>{
    promptBox.value = '';
    history.replaceState(null,'', location.origin + location.pathname);
    showToast('クリアしました');
  });

  // ハッシュから読み込み
  (function bootFromHash(){
    const h = location.hash.startsWith('#') ? location.hash.slice(1) : '';
    if(!h) return;
    const txt = decHash(h);
    if(txt){ promptBox.value = txt; showToast('URLから読み込みました'); }
  })();
</script>
</body>
</html>
