<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>プロンプトタグ｜ライト／リアル／ボイス</title>
<meta name="theme-color" content="#ffffff">
<style>
  :root{
    /* Light */
    --bg:#f7f8fc; --card:#ffffff; --ink:#1f2937; --muted:#6b7280;
    --brand:#6366f1; --brand2:#a78bfa; --ok:#10b981; --stroke:#e5e7eb;
    --chip:#eef2ff; --chip-ink:#3730a3; --divider:#dfe3ef;
    --accent-grad:linear-gradient(90deg,var(--brand),var(--brand2));
    --dock-shadow:0 10px 30px rgba(31,41,55,.08);
  }
  /* Real (Dark) */
  body.pro{
    --bg:#0f1115; --card:#151821; --ink:#e5e7eb; --muted:#97a3b6;
    --stroke:#242a3a; --divider:#2a3042;
    --chip:#1b2130; --chip-ink:#cbd5e1;
    --accent-grad:linear-gradient(90deg,#0ea5e9,#22d3ee);
    --dock-shadow:0 10px 30px rgba(0,0,0,.45);
  }
  *{box-sizing:border-box; -webkit-tap-highlight-color:transparent}
  html,body{margin:0;background:var(--bg);color:var(--ink);
    font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans JP",sans-serif}
  .wrap{max-width:760px;margin:0 auto;padding:18px 14px 148px}
  .card{background:var(--card);border:1px solid var(--stroke);border-radius:16px;box-shadow:0 6px 24px rgba(0,0,0,.05)}
  header{display:flex;align-items:center;gap:12px;padding:14px 16px 8px}
  .logo{width:40px;height:40px;border-radius:12px;background:
    radial-gradient(120% 120% at 10% 10%,#eef2ff 0,#e0e7ff 35%,#c7d2fe 60%,#a5b4fc 100%);
    display:grid;place-items:center;color:#4338ca;font-weight:700}
  body.pro .logo{background:radial-gradient(120% 120% at 10% 10%,#1a2440 0,#13243c 50%,#0e2238 100%); color:#67e8f9}
  h1{font-size:18px;line-height:1.2;margin:0}
  /* tabs */
  .seg{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;margin:8px 16px}
  .seg button{appearance:none;border:1px solid var(--stroke);background:var(--card);
    padding:12px;border-radius:12px;font-weight:700;color:var(--ink)}
  .seg button.active{border-color:transparent;background:var(--accent-grad);color:#fff}
  .banner{margin:0 16px 10px;border-radius:12px;padding:10px 12px;font-size:12px}
  body:not(.pro) .banner{background:#eef2ff;color:#3730a3}
  body.pro .banner{background:#0b1220;color:#93c5fd;border:1px solid #0f172a}
  /* sections */
  .section{padding:12px 16px}
  .title{font-size:13px;font-weight:800;letter-spacing:.02em;margin:0 0 8px}
  .box{border:1px solid var(--stroke);border-radius:12px;background:var(--card)}
  .textarea{width:100%;min-height:120px;max-height:420px;padding:12px;border:0;
    border-radius:12px;font-size:15px;line-height:1.6;background:transparent;color:var(--ink);resize:vertical}
  .hint{display:flex;gap:8px;align-items:center;font-size:12px;color:var(--muted);
    padding:8px 12px;border-top:1px dashed var(--divider)}
  .divider{height:12px;background:linear-gradient(180deg,transparent,rgba(0,0,0,0.02));
    border-top:1px solid var(--divider);border-bottom:1px solid var(--divider);margin:8px 0}
  .chips{display:flex;gap:10px;row-gap:10px;flex-wrap:wrap}
  .chips.scroll{flex-wrap:nowrap;overflow:auto;padding:2px 2px 8px;scroll-snap-type:x mandatory}
  .chips.scroll .chip{scroll-snap-align:start}
  .chip{appearance:none;border:0;background:var(--chip);color:var(--chip-ink);
    padding:12px 14px;border-radius:18px;font-size:14px;white-space:nowrap}
  .chip.big{font-size:15px;padding:14px 16px}
  .chip.outline{background:transparent;border:1px solid var(--stroke);color:var(--ink)}
  .chip:active{transform:translateY(1px)}
  details{border:1px solid var(--stroke);border-radius:12px;background:var(--card)}
  details+details{margin-top:10px}
  summary{list-style:none;padding:12px 14px;font-weight:700;cursor:pointer}
  summary::-webkit-details-marker{display:none}
  .panel{padding:12px;border-top:1px solid var(--stroke)}
  /* Dock */
  .dock{position:fixed;left:0;right:0;bottom:0;padding:14px 12px;background:linear-gradient(180deg,rgba(0,0,0,0),var(--bg) 14px)}
  .dock .card{box-shadow:var(--dock-shadow);border-radius:16px;padding:10px 10px 12px}
  .dock-title{font-size:12px;color:var(--muted);padding:0 6px 6px;border-bottom:1px solid var(--divider);margin-bottom:10px}
  .row{display:flex;gap:8px}
  .btn{flex:1;appearance:none;border:0;border-radius:12px;padding:12px 14px;font-weight:800;font-size:15px;color:#fff;background:#111}
  .btn.brand{background:var(--accent-grad)}
  .btn.ghost{background:transparent;color:var(--ink);border:1px solid var(--stroke)}
  .btn:active{transform:translateY(1px)}
  .more{margin-top:8px}
  .more details{border:1px dashed var(--divider);background:transparent}
  .more summary{font-weight:600;color:var(--muted)}
  .toast{position:fixed;left:50%;bottom:92px;transform:translateX(-50%);background:#111;color:#fff;padding:10px 12px;border-radius:10px;
    font-size:13px;opacity:0;pointer-events:none;transition:opacity .25s;z-index:50}
  .toast.show{opacity:1}
  .hidden{display:none}
</style>
</head>
<body class="lite">
<div class="wrap">
  <div class="card">
    <header>
      <div class="logo">PT</div>
      <div><h1>プロンプトタグ</h1></div>
    </header>

    <!-- Tabs: Light / Real / Voice -->
    <div class="seg" role="tablist" aria-label="モード切替">
      <button id="tab-lite" class="active" role="tab" aria-selected="true">ライト</button>
      <button id="tab-pro" role="tab" aria-selected="false">リアル</button>
      <button id="tab-voice" role="tab" aria-selected="false">ボイス</button>
    </div>

    <!-- Banner -->
    <p id="banner" class="banner">ライト：明るくシンプル。ボタン→少し直す→送る。</p>

    <!-- Prompt area -->
    <div class="section">
      <p class="title">テキスト</p>
      <div class="box">
        <textarea id="prompt" class="textarea" inputmode="text" enterkeyhint="done" placeholder="ここに送る文章（プロンプト）"></textarea>
        <div class="hint">🎯 コントロール：下のプリセットを押す → 必要なら“出力コントロール”を足す → 共有/コピー。</div>
      </div>
    </div>

    <!-- Light -->
    <section id="mode-lite" class="section" role="tabpanel">
      <p class="title">クイック（遊び感覚）</p>
      <div class="box" style="padding:12px">
        <div class="chips">
          <button class="chip big" data-key="lite_genki">🎙️ 元気な実況</button>
          <button class="chip big" data-key="lite_shop">🛒 やさしい店員</button>
          <button class="chip big" data-key="lite_uranai">🔮 占い師風</button>
          <button class="chip big" data-key="lite_teacher">🏫 先生風</button>
          <button class="chip big" data-key="lite_nagoya">🍤 名古屋弁12歳</button>
          <button class="chip big" data-key="lite_bbs">🧵 掲示板っぽく</button>
        </div>
      </div>
    </section>

    <div class="divider" aria-hidden="true"></div>

    <!-- Real -->
    <section id="mode-pro" class="section hidden" role="tabpanel" aria-hidden="true">
      <p class="title">重厚プリセット（没入）</p>
      <div class="box" style="padding:12px">
        <div class="chips scroll">
          <button class="chip" data-key="pro_90s_bbs">90s × 掲示板（没入）</button>
          <button class="chip" data-key="pro_80s_blog">80s × ブログ（没入）</button>
          <button class="chip" data-key="pro_00s_social">00s × タイムライン（没入）</button>
          <button class="chip" data-key="pro_edo_diary">江戸 × 町日記（没入）</button>
          <button class="chip" data-key="pro_trpg_tokyo">TRPG × 現代東京</button>
          <button class="chip" data-key="pro_img_friendly">一枚絵テキスト</button>
        </div>
      </div>

      <details class="section" open>
        <summary>職業（プロフェッショナル）</summary>
        <div class="panel">
          <div class="chips">
            <button class="chip outline" data-key="job_lawyer">⚖️ 弁護士（現場ログ）</button>
            <button class="chip outline" data-key="job_nurse">🩺 看護師（当直ログ）</button>
            <button class="chip outline" data-key="job_site_mgr">🏗️ 建築監督（日誌）</button>
            <button class="chip outline" data-key="job_conveni">🏪 コンビニ店長（束ログ）</button>
          </div>
        </div>
      </details>
    </section>

    <div class="divider" aria-hidden="true"></div>

    <!-- Voice -->
    <section id="mode-voice" class="section hidden" role="tabpanel" aria-hidden="true">
      <p class="title">音声会話に強いプリセット</p>
      <div class="box" style="padding:12px">
        <div class="chips">
          <button class="chip" data-key="voice_narration">🎧 朗読台本（1分）</button>
          <button class="chip" data-key="voice_chat_assist">🗣️ 会話アシスト（口述→整形）</button>
          <button class="chip" data-key="voice_diary">📝 声日記→要約/行動提案</button>
          <button class="chip" data-key="voice_mc_qa">🎤 司会進行でQ&A</button>
          <button class="chip" data-key="voice_stream">📻 実況ラジオ（ゲーム）</button>
          <button class="chip" data-key="voice_asr_fix">✍️ ASR補正（句読点/固有名）</button>
        </div>
      </div>
      <div class="hint">※ 音声入力はChatGPTアプリ推奨。「アプリに共有」から入ると速い。</div>
    </section>

    <!-- Output Controls -->
    <section class="section">
      <p class="title">出力コントロール（後がけで混ぜる）</p>
      <div class="box" style="padding:12px">
        <div class="chips scroll" id="ctl-length">
          <button class="chip outline" data-ctl="len_short">長さ=短</button>
          <button class="chip outline" data-ctl="len_mid">長さ=中</button>
          <button class="chip outline" data-ctl="len_long">長さ=長</button>
        </div>
        <div style="height:8px"></div>
        <div class="chips scroll" id="ctl-format">
          <button class="chip outline" data-ctl="fmt_para">形式=段落</button>
          <button class="chip outline" data-ctl="fmt_bullets">形式=箇条書き</button>
          <button class="chip outline" data-ctl="fmt_table">形式=表/見出し</button>
          <button class="chip outline" data-ctl="fmt_code">形式=コード枠</button>
        </div>
        <div style="height:8px"></div>
        <div class="chips scroll" id="ctl-tone">
          <button class="chip outline" data-ctl="tone_tight">トーン=タイト</button>
          <button class="chip outline" data-ctl="tone_balanced">トーン=標準</button>
          <button class="chip outline" data-ctl="tone_creative">トーン=創造的</button>
        </div>
      </div>
      <div class="hint">タップするとテキスト末尾に小さな指示を“追記”します（プリセットは上書き、コントロールは加算）。</div>
    </section>
  </div>
</div>

<!-- Dock -->
<div class="dock" aria-label="アクション">
  <div class="card">
    <div class="dock-title">アクション</div>
    <div class="row" style="margin-bottom:8px">
      <button class="btn brand" id="shareApp">アプリに共有</button>
      <button class="btn ghost" id="openWeb">Webで開く（コピー）</button>
      <button class="btn" style="background:var(--ok)" id="copyBtn">コピー</button>
    </div>
    <div class="more">
      <details>
        <summary>その他（NFC/リセット）</summary>
        <div class="panel">
          <div class="row">
            <button class="btn ghost" id="saveURL">URLを作る</button>
            <button class="btn ghost" id="clearBtn">クリア</button>
          </div>
          <p class="hint" style="margin-top:8px">URLの # 以降にテキストを埋め込みます。長文は共有/コピー推奨。</p>
        </div>
      </details>
    </div>
  </div>
</div>

<div id="toast" class="toast" role="status" aria-live="polite">copied</div>

<!-- Presets -->
<script id="presetsJSON" type="application/json">
{
  "lite_genki": "役割: 実況。トーン: 明るい/短く/比喩最小。出力: 絵が浮かぶ二文。",
  "lite_shop": "役割: 案内人。トーン: 優しい/即答。出力: 次の一手を一行で→補足一行。",
  "lite_uranai": "役割: 占い師。出力: 方向性ひとつ/ラッキー(物,色,音) 各一語。",
  "lite_teacher": "役割: 先生。出力: 例を一つ使い二文で説明。用語はやさしく。",
  "lite_nagoya": "役割: 12歳。方言: 名古屋。出力: 砕けた二文、語尾は軽く。",
  "lite_bbs": "体裁: 短レス往復。出力: 導入一行→1–2文レス×数回。",

  "pro_90s_bbs": "体裁: 等幅ログ。各レス=『番号 名前 mail 投稿日:YYYY/MM/DD(曜) HH:MM:SS ID:XXXXXXXX』→本文1–3行。味付け: ときどきsage/安価/ささやかなAA/半角顔文字。ディテール: 音(ﾋﾟｰｶﾞｶﾞ/改札) 道具(テレカ/MD/ワープロ) 値段(CD千円弱/おにぎり100円台) 時間(終電/〜分)。流れ: ヘッダ→街の話題が自然に巡回→雨/深夜で空気が変わる→静かな落ち。書き出し:\n──────────\n【板名】オカルト（仮）\n【スレタイ】あの頃の街の音と道具で語れ(仮)\n【dat】199x/xx/xx\n──────────",
  "pro_80s_blog": "体裁: 記事+コメント。記事=タイトル/擬日付/著者風→本文6–10段落(各2文)。要素: ブラウン管の静電気/硬券/鋏の音/蛍光灯/たばこの匂い/定食600円台/缶120円。見た目: 『◆見出し』/区切り線『――――』/行頭全角スペース。締め: コメントNo.15–25。",
  "pro_00s_social": "体裁: タイムライン。固定ポスト→短ポストが連なる。記法: 時刻/handle/↳リプ/軽いハッシュタグ/顔文字は控えめ。情景: ADSL常時接続/折りたたみ携帯/ネット喫茶/IC乗車券初期/牛丼280–380円。",
  "pro_edo_diary": "体裁: 町日記→小見出し×5→区切り→問答ログ。語り口: 常体、匂いと手触り。モチーフ: 鐘/井戸/行商/蕎麦十数文/舟運/長屋。言い回しは薄く江戸風。",
  "pro_trpg_tokyo": "体裁: 都市セッションログ。章: 0概要/1導入/2探索/3邂逅/4小事件/5小結。章ごとに『[時間][場所]』とSE〈改札ピッ〉などを点滴。各章に“音/道具/値段/看板の文字”のうち3を置く。",
  "pro_img_friendly": "目的: 脳内に一枚絵。出力: タイトル一行→本文60–120語(構図/衣装/小物/光源/時代痕跡/看板の文字)→任意で英語短プロンプト。数字は目安。",

  "job_lawyer": "体裁: 事務所と法廷の断片ログ。音: コピー/ホチキス/製本テープ。道具: ICレコーダー/時系列表/付箋。流れ: 受任→証拠→交渉/訴訟→和解/判決→清算。文は短く、事実→評価→結論。",
  "job_nurse": "体裁: 当直の時系列メモ。音: コール/モニタ。匂い: 消毒。手順: バイタル→投薬ダブルチェック→記録。合間に家族説明。",
  "job_site_mgr": "体裁: 現場日誌。朝礼/近隣/安全/工程/品質/原価。音: 打設の振動/警告音。写真と出来形の断片を差し挟む。",
  "job_conveni": "体裁: 店内放送/シフト欄外メモ/終業チェックの束。音: フライヤーの油/台車/レジのピッ。手順: 検品→前出し→日配→締め。",

  "voice_narration": "目的: 音声朗読に最適化。出力: タイトル→60–90秒の本文→余韻一行。文長は声に乗るリズム、固有名は控えめ。息継ぎの箇所に / を少量入れる。",
  "voice_chat_assist": "目的: 口述をそのまま渡す前提。出力: 誤字推定→句読点補完→二文要約→提案一行。語尾は自然。ユーザー原文の言い回しを尊重。",
  "voice_diary": "目的: 声日記を軽く編集。出力: 箇条書き要約3点→気づき2点→明日の一手1つ。優しいトーン。",
  "voice_mc_qa": "目的: 音声の司会進行。出力: オープナー1行→進行3ブロック（テーマ提示→短QA→まとめ）→クロージング一言。テンポ重視。",
  "voice_stream": "目的: ラジオ風実況。出力: ジングル→プレイ区間ハイライト×5→小話→次回予告。音の擬態語は控えめに。",
  "voice_asr_fix": "目的: 音声認識テキストの整形。出力: 句読点補完→地の文に整える→固有名はカタカナ仮で統一→3行要約。"
}
</script>

<script>
  // ---------- Elements ----------
  const body = document.body;
  const promptBox = document.getElementById('prompt');
  const tabLite  = document.getElementById('tab-lite');
  const tabPro   = document.getElementById('tab-pro');
  const tabVoice = document.getElementById('tab-voice');
  const modeLite = document.getElementById('mode-lite');
  const modePro  = document.getElementById('mode-pro');
  const modeVoice= document.getElementById('mode-voice');
  const banner   = document.getElementById('banner');
  const toast    = document.getElementById('toast');

  // ---------- Mode switch ----------
  function setMode(mode){
    const isLite  = (mode==='lite');
    const isPro   = (mode==='pro');
    const isVoice = (mode==='voice');
    body.classList.toggle('pro', isPro);
    // tabs
    tabLite.classList.toggle('active', isLite);
    tabPro.classList.toggle('active', isPro);
    tabVoice.classList.toggle('active', isVoice);
    tabLite.setAttribute('aria-selected', isLite);
    tabPro.setAttribute('aria-selected', isPro);
    tabVoice.setAttribute('aria-selected', isVoice);
    // sections
    modeLite.classList.toggle('hidden', !isLite);
    modePro.classList.toggle('hidden', !isPro);
    modeVoice.classList.toggle('hidden', !isVoice);
    modePro.setAttribute('aria-hidden', !isPro);
    modeVoice.setAttribute('aria-hidden', !isVoice);
    // banner
    banner.textContent = isLite
      ? 'ライト：明るくシンプル。ボタン→少し直す→送る。'
      : isPro
      ? 'リアル：黒基調。没入プリセットで“音/道具/値段/文字”を入れて描く。'
      : 'ボイス：音声向けの台本/整形/要約/司会/実況/ASR補正。';
    localStorage.setItem('pt_mode', mode);
  }
  tabLite.addEventListener('click', ()=>setMode('lite'));
  tabPro.addEventListener('click', ()=>setMode('pro'));
  tabVoice.addEventListener('click', ()=>setMode('voice'));
  setMode(localStorage.getItem('pt_mode') || 'lite');

  // ---------- Toast ----------
  function showToast(msg){ toast.textContent = msg; toast.classList.add('show'); setTimeout(()=>toast.classList.remove('show'),1400); }

  // ---------- Presets ----------
  const PRESETS = JSON.parse(document.getElementById('presetsJSON').textContent);

  function insertPreset(text){
    const start = document.activeElement;
    promptBox.value = (text||'').trim();
    if (start && typeof start.blur==='function' && start!==promptBox) start.blur(); // フォーカス抜き→キーボード出ない
    showToast('プリセットを挿入しました');
  }

  document.querySelectorAll('.chip').forEach(btn=>{
    btn.addEventListener('click',()=>{
      const key  = btn.dataset.key;
      const text = key ? PRESETS[key] : (btn.dataset.preset||btn.textContent);
      insertPreset(text);
    });
  });

  // ---------- Output Controls (appenders) ----------
  const CTL_MAP = {
    'len_short':   '〔出力長〕短めで。要点を先に置く。',
    'len_mid':     '〔出力長〕中。読みやすい段落で。',
    'len_long':    '〔出力長〕長。ディテールを厚く、余白を残す。',
    'fmt_para':    '〔形式〕段落文。見出しは短く。',
    'fmt_bullets': '〔形式〕箇条書き中心。1項目=一文。',
    'fmt_table':   '〔形式〕表/見出し調で整列。列は必要最小限。',
    'fmt_code':    '〔形式〕コード枠に整形（書式が崩れないように）。',
    'tone_tight':  '〔トーン〕タイト。断言/比喩最小。',
    'tone_balanced':'〔トーン〕標準。滑らか/過不足なし。',
    'tone_creative':'〔トーン〕創造的。固有名は控えめに。'
  };

  function appendCtl(tag){
    const ins = CTL_MAP[tag];
    if(!ins) return;
    const sep = promptBox.value.trim().length ? '\n\n' : '';
    promptBox.value = (promptBox.value + sep + ins).trim();
    showToast('出力コントロールを追記');
  }

  document.querySelectorAll('[data-ctl]').forEach(btn=>{
    btn.addEventListener('click',()=>appendCtl(btn.dataset.ctl));
  });

  // ---------- Share / Copy ----------
  async function shareToApp(text){
    if (navigator.share){
      try{ await navigator.share({ text }); return true; }catch(e){}
    }
    return false;
  }
  async function doCopy(text){
    try{
      const ta=document.createElement('textarea');
      ta.value=text; ta.setAttribute('readonly','');
      ta.style.position='fixed'; ta.style.opacity='0'; ta.style.top='-2000px';
      document.body.appendChild(ta); ta.focus(); ta.select(); ta.setSelectionRange(0,text.length);
      const ok=document.execCommand && document.execCommand('copy');
      document.body.removeChild(ta); if(ok) return true;
    }catch(e){}
    try{ await navigator.clipboard.writeText(text); return true; }catch(e){ return false; }
  }

  document.getElementById('shareApp').addEventListener('click', async ()=>{
    const txt = promptBox.value.trim();
    if(!txt){ showToast('テキストが空です'); return; }
    const shared = await shareToApp(txt);
    if (shared){ showToast('共有シートを開きました。ChatGPTを選んでください'); return; }
    const ok = await doCopy(txt);
    window.open('https://chat.openai.com/','_blank','noopener');
    showToast(ok ? 'コピー済み。ChatGPTで貼り付けてください' : 'コピー不可。手動でペーストしてください');
  });

  document.getElementById('openWeb').addEventListener('click', async ()=>{
    const txt = promptBox.value.trim();
    if(!txt){ showToast('テキストが空です'); return; }
    const ok = await doCopy(txt);
    window.open('https://chat.openai.com/','_blank','noopener');
    showToast(ok ? 'コピー済み。ChatGPTで貼り付けてください' : 'コピー不可。手動でペーストしてください');
  });

  document.getElementById('copyBtn').addEventListener('click', async ()=>{
    const ok = await doCopy(promptBox.value);
    showToast(ok?'コピーしました':'コピーに失敗。長押し→ペーストしてください');
  });

  // ---------- URL pack for NFC ----------
  function encHash(s){ return encodeURIComponent(s).replace(/%20/g,'+'); }
  function decHash(h){ try{ return decodeURIComponent(h.replace(/\+/g,'%20')); }catch(e){ return h; } }

  document.getElementById('saveURL').addEventListener('click', async ()=>{
    const txt = promptBox.value.trim();
    if(!txt){ showToast('テキストが空です'); return; }
    if (txt.length > 1500) { showToast('長文です。URL埋め込みは非推奨（共有/コピー推奨）'); return; }
    const url = location.origin + location.pathname + '#' + encHash(txt);
    history.replaceState(null,'', url);
    const ok = await doCopy(url);
    showToast(ok ? 'URLをコピーしました' : 'URLコピー不可。手動で選択してください');
  });

  document.getElementById('clearBtn').addEventListener('click', ()=>{
    promptBox.value = '';
    history.replaceState(null,'', location.origin + location.pathname);
    showToast('クリアしました');
  });

  // ---------- Boot from hash ----------
  (function bootFromHash(){
    const h = location.hash.startsWith('#') ? location.hash.slice(1) : '';
    if(!h) return;
    const txt = decHash(h);
    if(txt){ promptBox.value = txt; showToast('URLから読み込みました'); }
  })();
</script>
</body>
</html>
